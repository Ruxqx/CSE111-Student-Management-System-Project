<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
<h1>Admin Dashboard</h1>
<a href="/logout" style="
    background-color: gold;
    color: black;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
    border: 1px solid #b8860b;
">Logout</a>


<h2>Users</h2>
<table border="1">
<tr><th>ID</th><th>Email</th><th>Role</th><th>Action</th></tr>
{% for u in users %}
<tr>
<td>{{ u.user_id }}</td>
<td>{{ u.email }}</td>
<td>{{ u.role }}</td>
<td>
<form action="/users/delete/{{ u.user_id }}" method="post" style="display:inline;">
<button type="submit">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</table>

<h3>Add User</h3>
<form action="/users/add" method="post">
Email: <input name="email" required>
Password: <input name="password" required>
Role: <select name="role">
<option value="admin">Admin</option>
<option value="instructor">Instructor</option>
<option value="student">Student</option>
</select>
<button type="submit">Add</button>
</form>

<hr>

<h2>Departments</h2>
<table border="1">
<tr><th>ID</th><th>Name</th><th>Building</th><th>Chair ID</th><th>Actions</th></tr>
{% for d in departments %}
<tr>
<td>{{ d.dept_id }}</td>
<td>{{ d.name }}</td>
<td>{{ d.building }}</td>
<td>{{ d.chair_id }}</td>
<td>
<form action="/departments/delete/{{ d.dept_id }}" method="post" style="display:inline;">
<button type="submit">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</table>

<h3>Add Department</h3>
<form action="/departments/add" method="post">
Name: <input name="name" required>
Building: <input name="building">
Chair ID: <input name="chair_id">
<button type="submit">Add</button>
</form>

<hr>

<h2>Courses</h2>
<table border="1">
<tr><th>ID</th><th>Name</th><th>Department</th><th>Description</th><th>Actions</th></tr>
{% for c in courses %}
<tr>
<td>{{ c.c_id }}</td>
<td>{{ c.name }}</td>
<td>{{ c.dept_id }}</td>
<td>{{ c.desc }}</td>
<td>
<form action="/courses/delete/{{ c.c_id }}" method="post" style="display:inline;">
<button type="submit">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</table>

<h3>Add Course</h3>
<form action="/courses/add" method="post">
Name: <input name="name" required>
Department ID: <input name="dept_id">
Description: <input name="desc">
<button type="submit">Add</button>
</form>

<hr>



<h2>Sections</h2>
<table border="1">
<tr>
    <th>Section ID</th>
    <th>Course ID</th>
    <th>Semester</th>
    <th>Year</th>
    <th>Instructor</th>
    <th>Actions</th>
</tr>

{% for s in sections %}
<tr>
    <td>{{ s.section_id }}</td>
    <td>{{ s.c_id }}</td>
    <td>{{ s.semester }}</td>
    <td>{{ s.year }}</td>
    <td>
        {% if s.instructor_names %}
            {{ s.instructor_names }}
        {% else %}
            Unassigned
        {% endif %}
    </td>

    <td>
        <form action="/sections/delete/{{ s.section_id }}" method="post" style="display:inline;">
            <button type="submit">Delete</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>

<h3>Add Section</h3>
<form action="/sections/add" method="post">
    Course ID: <input name="c_id" required>
    Semester: <input name="semester" required>
    Year: <input name="year" required>
    <button type="submit">Add</button>
</form>


<h3>Assign Instructor</h3>
<form action="/instructorSections/add" method="post">
    Section ID: 
    <select name="section_id" required>
        {% for s in sections %}
        <option value="{{ s.section_id }}">
            {{ s.section_id }} - {{ s.c_id }} - {{ s.semester }} {{ s.year }}
        </option>
        {% endfor %}
    </select>

    Instructor: 
    <select name="i_id" required>
        {% for instr in instructors %}
        <option value="{{ instr.i_id }}">{{ instr.name }}</option>
        {% endfor %}
    </select>

    Role: <input name="role_in_section" placeholder="e.g., Lecturer">
    <button type="submit">Assign</button>
</form>


</body>
</html>
